(ocamllex lexer)

(menhir
 (modules parser))

(library
 (name basictypes)
 (modules basictypes)
 (preprocess
  (pps ppx_deriving.show)))

(library
 (name expr)
 (modules expr)
 (libraries basictypes)
 (preprocess
  (pps ppx_deriving.show)))

(library
  (name lexer)
  (libraries parser)
  (modules lexer))

(library
  (name parser)
  (libraries pirouette basictypes)
  (modules parser))

(library
  (name utils)
  (libraries unix)
  (modules))

(library
 (name ctrl)
 (modules ctrl)
 (libraries basictypes)
 (preprocess
  (pps ppx_deriving.show)))

(library
 (name constants)
 (modules constants))

(executable
 (name main)
 (public_name main)
 (modules main)
 (libraries pirouette parser unix lexer threads.posix stdune))

(executable
 (name ep)
 (public_name ep)
 (modules ep)
 (libraries pirouette expr ctrl))

(executable
 (name typechecker)
 (public_name typechecker)
 (modules typechecker)
 (libraries pirouette expr containers basictypes))

(executable
 (name codify)
 (public_name codify)
 (modules codify utils)
 (libraries pirouette ctrl constants unix basictypes))

(executable
 (name output)
 (public_name output)
 (modules output)
 (libraries threads.posix stdune))

(library
 (name pirouette)
 (modules pirouette)
 (libraries basictypes)
 (preprocess
  (pps ppx_deriving.show)))

(library
 (name controlang)
 (modules controlang)
 (libraries basictypes pirouette)
 (preprocess
  (pps ppx_deriving.show)))