(ocamllex lexer)

(menhir
 (modules parser))

(library
 (name expr)
 (modules expr)
 (preprocess
  (pps ppx_deriving.show)))

(library
  (name lexer)
  (libraries parser)
  (modules lexer))

(library
  (name parser)
  (libraries expr)
  (modules parser))

(library
  (name utils)
  (libraries unix)
  (modules))

(library
 (name ctrl)
 (modules ctrl)
 (preprocess
  (pps ppx_deriving.show)))

(library
 (name constants)
 (modules constants))

(executable
 (name main)
 (public_name main)
 (modules main)
 (libraries expr parser unix lexer threads.posix stdune))

(executable
 (name ep)
 (public_name ep)
 (modules ep)
 (libraries expr ctrl))

(executable
 (name codify)
 (public_name codify)
 (modules codify utils)
 (libraries expr ctrl constants unix ))

(executable
 (name output)
 (public_name output)
 (modules output)
 (libraries threads.posix stdune))